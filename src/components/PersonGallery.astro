---
import { contentfulClient } from "@/lib/contentful";
import PersonCard from "./PersonCard.astro";
import type { Asset } from "contentful";

export interface Person {
    name: string;
    image: Asset;
    position: string;
    quote: string;
    order: number;
}

const entries = await contentfulClient.getEntries<Person>({
    content_type: "person",
})

const persons = entries.items.map((item) => {
    const { name, image, position, quote, order } = item.fields;
    return {
        name,
        image,
        position,
        quote,
        order
    };
});

persons.sort((a,b) => a.order - b.order)

console.log(persons);
---
<div class="flex justify-center">
    <div
        class="grid row-auto items-stretch grid-cols-2 sm:grid-cols-4 items-center justify-items-center gap-3 p-4 w-full sm:max-w-6xl"
    >
    {
        persons.map((person: Person) => (
        <PersonCard
            name={person.name}
            image={person.image}
            position={person.position}
            quote={person.quote}
        />
        ))}
    </div>
</div>